apply plugin: 'groovy'
apply plugin: 'maven'
apply plugin: 'idea'

group   = 'mueke'
version = '0.1-SNAPSHOT'

ext.gebVersion = '0.9.1'
ext.seleniumVersion = '2.41.0'
ext.spockVersion = '0.7-groovy-2.0'
ext.groovyVersion = '2.3.4'
ext.selendroidVersion = '0.10.0'

repositories {
   mavenCentral()
}

dependencies {

    compile 'org.codehaus.groovy:groovy-all:$groovyVersion'
    compile "org.slf4j:slf4j-api:1.7.6"
    compile 'ch.qos.logback:logback-classic:1.1.2'
    compile "org.seleniumhq.selenium:selenium-java:$seleniumVersion"

    testCompile group: 'junit', name: 'junit', version: '4.11'
    compile("org.gebish:geb-spock:$gebVersion") {
        exclude module: "groovy"
        exclude module: "groovy-all"
    }
    compile("org.spockframework:spock-core:$spockVersion") {
        exclude module: "junit"
        exclude module: "groovy"
        exclude module: "groovy-all"
    }

    compile "org.codehaus.groovy:groovy-all:$groovyVersion"
    compile("org.gebish:geb-spock:$gebVersion") {
        exclude module: "groovy"
        exclude module: "groovy-all"
    }
    compile("org.spockframework:spock-core:$spockVersion") {
        exclude module: "junit"
        exclude module: "groovy"
        exclude module: "groovy-all"
    }


    compile "io.selendroid:selendroid-standalone:$selendroidVersion"
    compile "io.selendroid:selendroid-client:$selendroidVersion"
    compile "org.uiautomation:ios-client:0.6+"
    compile('io.appium:java-client:1.6.1'){
       // exclude module: "selenium-java"
    }
}

task startSelendroid << {
   "java -jar ${projectDir}"
}

task startAppium << {
    "appium --command-timeout 90000 &".execute()
}

task startIosdriver << {
    "java -jar ios-driver".execute()
}


task runSelendroidTests(type:Test,dependsOn:[startSelendroid]) {
    systemProperty "appUT_absolutePath", "${projectDir}/src/test/resources/testapk/selendroid-test-app-0.9.0.apk"
    systemProperty "appUT.package","io.selendroid.testapp"
    systemProperty "appUT.version","0.10.0"
    systemProperty "appUT_cap_Emulator","false"
    systemProperty "framework","selendroid"
    include ''

}

task runAppiumTests( type: Test, dependsOn:[startAppium]){
    systemProperty "appUT.package","io.selendroid.testapp"
    systemProperty "appium_app", "${projectDir}/src/test/resources/testapk/selendroid-test-app-0.9.0.apk"
    //To run the test on a specific device
    //System.setProperty("appium_udid","192.168.56.10:5555")
    //System.setProperty("appium_automationName","selendroid")

    //Use Appium
    systemProperty "framework","appium"

}





