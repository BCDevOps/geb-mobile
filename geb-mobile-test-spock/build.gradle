dependencies {
    compile project(':geb-mobile')
}

tasks.withType(Test) { task ->
    onlyIf { !Boolean.getBoolean('skip.tests') }
    ignoreFailures = true
    systemProperties.put = System.properties
    outputs.upToDateWhen { false }
}


//*******************

task AndroidAppiumBrowserStack(type: Test, dependsOn: [compileGroovy]) {
    systemProperties.put "framework", "appium"
    systemProperties.put "appium_app", "bs://0e5728e1871f40ecdcb6aca65d312e89ffe23f56"
    systemProperties.put "appium.url", "https://automationtestin1:mcRNFjAbC55fEvmSPsH1@hub.browserstack.com/wd/hub"
    systemProperties.put "appium_platformName", "Android"
    systemProperties.put "appium_deviceName", "Google Pixel"

    include '**/GebMobileAutomationTestWithPagesSpec.*'
}

//uploading apps:
task uploadAppBS(type: Exec) {
    commandLine = ['curl', '-u', "automationtestin1:mcRNFjAbC55fEvmSPsH1", '-X', 'POST', "https://api.browserstack.com/app-automate/upload", '-F', "file=@/Users/shellyhan/Downloads/TestDemo/WikipediaSample.apk" ]
}